<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="OrgTreeMapper">
	<!--表名 -->
	<sql id="tableName">
		ORG_TREE
	</sql>

	<!-- 字段 -->
	<sql id="Field">
		NAME,
		CODE,
		IS_GLOBAL,
		IS_ENABLE,
		IS_DELETED,
		PARENT_ORGAN_ID,
		ORGAN_ID,
		LEVEL,
		PATH,
		CREATE_TIME,
		UPDATE_TIME,
		CREATE_USER,
		ID
	</sql>

	<!-- 字段值 -->
	<sql id="FieldValue">
		#{name},
		#{code},
		#{isGlobal},
		#{isEnable},
		#{isDeleted},
		#{parentOrganId},
		#{organId},
		#{level},
		#{path},
		#{createTime},
		#{updateTime},
		#{createUser},
		#{id}
	</sql>

	<!-- 新增 -->
	<insert id="save" parameterType="com.seeyon.orgcenter.manage.tree.entity.OrgTree">
		insert into
		<include refid="tableName"></include>
		(
		<include refid="Field"></include>
		) values (
		<include refid="FieldValue"></include>
		)
	</insert>

	<!-- 查询所有菜单 -->
	<select id="findAll" resultType="com.seeyon.orgcenter.manage.tree.entity.OrgTree">
		select
		<include refid="Field"></include>
		from
		<include refid="tableName"></include>
		where
		IS_DELETED = 0
	</select>

	<!-- 通过ID获取数据 -->
	<select id="findById" parameterType="java.lang.Long" resultType="com.seeyon.orgcenter.manage.tree.entity.OrgTree">
		select
		<include refid="Field"></include>
		from
		<include refid="tableName"></include>
		where
		ID = #{id}
	</select>

	<!-- 修改 -->
	<update id="edit" parameterType="com.seeyon.orgcenter.manage.tree.entity.OrgTree">
		update
		<include refid="tableName"></include>
		set
		NAME = #{name},
		CODE = #{code},
		IS_GLOBAL = #{isGlobal},
		IS_ENABLE = #{isEnable},
		IS_DELETED = #{isDeleted},
		PARENT_ORGAN_ID = #{parentOrganId},
		ORGAN_ID = #{organId},
		LEVEL = #{level},
		PATH = #{path},
		CREATE_TIME = #{createTime},
		UPDATE_TIME = #{updateTime},
		CREATE_USER = #{createUser}
		where
		ID = #{id}
	</update>

	<!-- 删除菜单（单个） -->
	<update id="delete" parameterType="java.lang.Long">
		update
		<include refid="tableName"></include>
		set
		IS_DELETED = 1
		where
		ID = #{id}
	</update>

	<!-- 删除菜单（多个） -->
	<update id="deleteAll" parameterType="java.util.List">
		update
		<include refid="tableName"></include>
		set
		IS_DELETED = 1
		where
		ID in
		<foreach item="item" index="index" collection="list" open="(" separator="," close=")">
			#{item}
		</foreach>
	</update>
</mapper>
